import{V as K,A as $,_ as F,D as J,a as q,S as G,P as z,b as Q,J as H,c as W,d as X}from"./ModelPlayer-015f1fbc.js";import{_ as Y}from"./TestPlayer-01003adc.js";import{_ as Z}from"./EventPlayer-29398210.js";import{P as ee}from"./PollPlayerParticipant-4c65d471.js";import{T as te}from"./AssignmentTaskPlayer-7c90886e.js";import{u as se}from"./resources-e1807ce6.js";import{A as le,r as d,y as C,q as oe,a as i,o as c,c as _,w as t,b as e,d as A,n as R,F as I,u as ae,f as V,D as re,g as N,t as T,e as L}from"./index-6b729fcd.js";import{_ as ne}from"./_plugin-vue_export-helper-c27b6911.js";const ce={class:"text-caption font-weight-light"},ie={class:"text-caption font-weight-light"},ue=le({__name:"ResourcesIterator",setup(de){const u=se(),r={AUDIO:"AUDIO",VIDEO:"VIDEO",IMAGES:"IMAGES",DOCUMENT:"DOCUMENT",PRESENTATION:"PRESENTATION",EVENT:"EVENT",DATASET:"DATASET",LINK:"LINK",POLL:"POLL",TEST:"TEST",POSTER:"POSTER",ARTICLE:"ARTICLE",JOB:"JOB",TASK:"TASK",MODEL:"MODEL"},k=d(["Title","Date Created","Subject"]),M=d(["Biostatistics","Probability Theory"]),g=d(""),f=d(""),v=d(""),p=d({}),E=d(!1),b=(l,s)=>l?l.length>s?l.substring(0,s)+"...":l:"",O=C(()=>{let l=u.resources.filter(s=>{const n=s.title?s.title.toLowerCase().includes(g.value.toLowerCase()):!1,a=!v.value||s.subject===v.value;return n&&a});return f.value==="Title"?l=l.sort((s,n)=>s.title.localeCompare(n.title)):f.value==="Date Created"?l=l.sort((s,n)=>new Date(n.createdAt).getTime()-new Date(s.createdAt).getTime()):f.value==="Subject"&&(l=l.sort((s,n)=>s.subject.localeCompare(n.subject))),l}),y=async l=>{E.value=!1,await u.fetchResource(l.id),p.value=u.resource,E.value=!0},P=C(()=>p.value?{[r.VIDEO]:K,[r.AUDIO]:$,[r.IMAGES]:F,[r.DATASET]:J,[r.DOCUMENT]:q,[r.PRESENTATION]:G,[r.TEST]:Y,[r.POSTER]:z,[r.EVENT]:Z,[r.ARTICLE]:Q,[r.POLL]:ee,[r.JOB]:H,[r.TASK]:te,[r.LINK]:W,[r.MODEL]:X}[p.value.contentType]:null);return oe(async()=>{const l=localStorage.getItem("resourceType"),s=localStorage.getItem("resourceType"),n=d("");if(s!==null)await u.getAllTestResources(n.value),localStorage.removeItem("resourceType");else if(l!==null)await u.getAllTaskResources(),localStorage.removeItem("resourceType");else{const a=localStorage.getItem("queryParams")||"";await u.getAllSpecificTypeResources(a)}y(u.resources[0])}),(l,s)=>{const n=i("v-select"),a=i("v-col"),x=i("v-text-field"),m=i("v-row"),B=i("v-divider"),S=i("v-img"),D=i("v-card-title"),h=i("v-card"),w=i("v-container");return c(),_(w,{fluid:""},{default:t(()=>[e(m,null,{default:t(()=>[e(a,{cols:"12"},{default:t(()=>[e(m,{align:"center",justify:"space-between"},{default:t(()=>[e(a,{cols:l.isMobile?12:4},{default:t(()=>[e(n,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=o=>f.value=o),items:k.value,label:"Sort by",dense:"",class:"sort-filter-select"},null,8,["modelValue","items"])]),_:1},8,["cols"]),e(a,{cols:l.isMobile?12:4},{default:t(()=>[e(n,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=o=>v.value=o),items:M.value,label:"Filter by",dense:"",class:"sort-filter-select"},null,8,["modelValue","items"])]),_:1},8,["cols"]),e(a,{cols:l.isMobile?12:4},{default:t(()=>[e(x,{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=o=>g.value=o),label:"Search",clearable:"",dense:"","prepend-inner-icon":"mdi-file-search",class:"sort-filter-select"},null,8,["modelValue"])]),_:1},8,["cols"])]),_:1})]),_:1})]),_:1}),e(B,{class:"my-2"}),e(m,null,{default:t(()=>[l.isMobile?(c(),_(a,{key:0,cols:"12",class:"pr-2"},{default:t(()=>[e(m,{class:"overflow-y-auto mt-1",style:{"max-height":"70vh","overflow-y":"auto"}},{default:t(()=>[(c(!0),A(I,null,R(O.value,(o,U)=>(c(),_(a,{key:o.id,class:"pa-0"},{default:t(()=>[e(h,{class:"mb-2 px-2 py-2",height:"8rem",onClick:j=>y(o),elevation:"2"},{default:t(()=>[e(m,{"no-gutters":""},{default:t(()=>[e(a,{cols:"3"},{default:t(()=>[e(S,{height:"4rem",width:"4rem",src:o.coverImage,class:"rounded"},null,8,["src"])]),_:2},1024),e(a,{cols:"9",class:"pl-2"},{default:t(()=>[e(D,{class:"text-body-1 font-weight-medium mb-1",style:{"font-size":"1rem"}},{default:t(()=>[N(T(o.title),1)]),_:2},1024),L("p",ce,T(b(o.description,50)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})):(c(),A(I,{key:1},[e(a,{cols:"10"},{default:t(()=>[P.value?V("",!0):(c(),_(h,{key:0,onClick:s[3]||(s[3]=o=>y(ae(u).resources[0])),class:"d-flex align-center justify-center resource-placeholder"},{default:t(()=>[e(S,{height:"21vh",class:"mt-24 ma-4",src:"https://cdn-icons-png.flaticon.com/512/907/907805.png"})]),_:1})),p.value&&E.value?(c(),_(w,{key:1,fluid:""},{default:t(()=>[(c(),_(re(P.value),{resource:p.value},null,8,["resource"]))]),_:1})):V("",!0)]),_:1}),e(a,{cols:"2",class:"pr-2"},{default:t(()=>[e(m,{class:"overflow-y-auto mt-1",style:{height:"400px","max-height":"400px","overflow-y":"auto"}},{default:t(()=>[(c(!0),A(I,null,R(O.value,(o,U)=>(c(),_(a,{key:o.id,class:"pa-0"},{default:t(()=>[e(h,{class:"mb-2 px-2 py-2",height:"8rem",onClick:j=>y(o),elevation:"2"},{default:t(()=>[e(m,{"no-gutters":""},{default:t(()=>[e(a,{cols:"3"},{default:t(()=>[e(S,{height:"4rem",width:"4rem",src:o.coverImage,class:"rounded"},null,8,["src"])]),_:2},1024),e(a,{cols:"9",class:"pl-2"},{default:t(()=>[e(D,{class:"text-body-1 font-weight-medium mb-1",style:{"font-size":"1rem"}},{default:t(()=>[N(T(o.title),1)]),_:2},1024),L("p",ie,T(b(o.description,50)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1})],64))]),_:1})]),_:1})}}});const Ee=ne(ue,[["__scopeId","data-v-2774a52a"]]);export{Ee as R};
