import{_ as B}from"./TestPlayer-3a29e0b0.js";import{r as l,i as L,l as $,a,o as n,d as h,b as t,f as c,w as e,e as i,t as v,g as f,c as x}from"./index-29b1d87f.js";import{a as R}from"./axios-78cd9fea.js";import{u as O}from"./resources-c352f549.js";import"./style.css_vue_type_style_index_0_src_true_lang-b904ba3d.js";import"./vue3-pdf-app.umd-5c7002a6.js";import"./_commonjsHelpers-de833af9.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./apolloClient-3b54e56b.js";const z={class:""},J={key:0},M={key:1},j=i("img",{style:{width:"100%","max-height":"9rem","object-fit":"cover"},src:"https://www.vevox.com/getmedia/d6e9e7d0-b98a-455b-b404-da9687ffd488/Live-polling_Hero_1166x523.png?width=1107",alt:"Live Poll"},null,-1),H={class:"mt-3"},U=i("h1",{class:"text-h6"},"Exam Participant Enrollment",-1),F={__name:"ParticipanTesttEnroll",setup(N){const u=O(),y="https://nem.bio:4000",g=l(!1),b=L(),m=l(b.query.sessionId||b.params.sessionId),p=l(localStorage.getItem("sessionId")),d=l(null),w=l(null),k=l(!1),T=()=>{const o=JSON.parse(u.exam),s=JSON.parse(o.participants);console.log({participants:s});const r=s.filter(_=>_.userId===p.value)[0];k.value=r.requestStatus==="ENROLLED"};$(async()=>{await u.getCurrentExam(m.value),p.value});const D=async()=>{console.log("Attempt this exam"),await u.getCurrentExam(m.value),T()},V=async()=>{try{const o={sessionId:m.value,userId:p.value},s=await R.post(`${y}/resources/uploads/exam/participant`,o);console.log({response:s}),s.data.message&&(d.value="Enrollment request submitted successfully.",setTimeout(()=>{d.value=""},4200),D())}catch(o){console.log({error:o}),R.isAxiosError(o)&&(w.value=o.response.data.error,setTimeout(()=>{window.location.reload()},4200))}};return(o,s)=>{const E=B,r=a("v-col"),_=a("v-img"),q=a("router-link"),I=a("v-row"),C=a("v-spacer"),S=a("v-btn"),A=a("v-card-actions"),P=a("v-alert");return n(),h("div",z,[g.value?(n(),h("div",J,[t(E)])):c("",!0),g.value?c("",!0):(n(),h("div",M,[t(I,null,{default:e(()=>[t(r,{cols:"12",sm:"9",class:"text-left mb-4"},{default:e(()=>[j]),_:1}),t(r,{cols:"12",sm:"3",class:"text-left mb-4"},{default:e(()=>[t(q,{to:"/welcome",class:"d-flex align-center"},{default:e(()=>[t(_,{src:"https://a2z-v0.s3.eu-central-1.amazonaws.com/Screenshot+from+2024-10-22+16-31-16.png",width:"100",height:"40"})]),_:1}),i("div",H,[t(I,null,{default:e(()=>[t(r,{cols:"9"},{default:e(()=>[U,i("p",null,"Exam ID: "+v(m.value),1),i("p",null,"Session ID: "+v(p.value),1)]),_:1}),t(r,{cols:"3"},{default:e(()=>[t(_,{style:{cursor:"pointer"},onClick:o.reRenderView,height:"3rem",src:"https://cdn-icons-png.flaticon.com/128/10619/10619786.png"},null,8,["onClick"])]),_:1})]),_:1})])]),_:1})]),_:1}),t(A,null,{default:e(()=>[t(C),t(S,{variant:"text",onClick:V},{default:e(()=>[f("Request Exam Enrollment")]),_:1}),k.value?(n(),x(S,{key:0,variant:"outlined","prepend-icon":"mdi-book-edit-outline",onClick:s[0]||(s[0]=G=>g.value=!0)},{default:e(()=>[f("Attempt this exam")]),_:1})):c("",!0),t(C)]),_:1}),w.value?(n(),x(P,{key:0,border:"top",type:"warning",variant:"outlined",prominent:"",class:"ml-38 mt-4",width:"72%"},{default:e(()=>[f(v(w.value),1)]),_:1})):c("",!0),d.value?(n(),x(P,{key:1,border:"top",type:"success",class:"ml-38 mt-4",width:"72%",variant:"outlined",prominent:""},{default:e(()=>[f(v(d.value),1)]),_:1})):c("",!0)]))])}}},st={__name:"index",setup(N){return(u,y)=>(n(),h("div",null,[t(F)]))}};export{st as default};
