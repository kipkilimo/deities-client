import{u as z}from"./resources-e1807ce6.js";import{D as $}from"./datetime-bca718f1.js";import{A as P,j as Y,r as A,l as Z,B as q,a as s,o as a,c as I,w as t,d as D,b as n,f as S,g as _,t as p,F as H,n as Q,e as r,s as W,p as X,h as ee}from"./index-6b729fcd.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import{b as C}from"./route-block-83d24a4e.js";import"./apolloClient-3b54e56b.js";const i=b=>(X("data-v-88da50a9"),b=b(),ee(),b),te={key:0},ne={key:1},se=i(()=>r("h4",null,"You are not enrolled in any tasks.",-1)),oe=i(()=>r("h6",null,"Check back later.",-1)),ae=i(()=>r("strong",null,"Duration:",-1)),re=i(()=>r("br",null,null,-1)),ce=i(()=>r("strong",null,"Deadline:",-1)),le=i(()=>r("br",null,null,-1)),ie=i(()=>r("br",null,null,-1)),de=i(()=>r("span",null,"View Assignment Task",-1)),ue=P({__name:"MyAssignments",setup(b){const N=Y(),m=A([{assignmentType:"",assignmentTitle:"",assignmentDescription:"",assignmentDuration:{hours:0,minutes:0},assignmentDeadline:"",remainingTimeNew:"",assignmentAnswersKey:[],assignmentTaskSet:[],id:"",contentType:"",title:"",coverImage:"",description:"",subject:"",topic:"",createdBy:{id:"",username:"",role:""},createdAt:"",sessionId:"",accessKey:""}]),d=A(!1),M=A(""),v=z(),O=async()=>{try{d.value=!0;const e=localStorage.getItem("sessionId");await v.getUserTasks(e||""),v.resources.length>=1&&(m.value=v.resources.map(o=>B(o))),d.value=!1}catch(e){M.value=`Failed to fetch tasks: ${e}`,d.value=!1}};function U(e){const f=$.local().toMillis(),g=$.fromFormat(e,"cccc, LLLL d, yyyy 'at' h:mm a 'GMT'Z"),h=f,c=g.toMillis()-h;if(c<=0)return"Lapsed.";const T=Math.floor(c/1e3%60),k=Math.floor(c/1e3/60%60),w=Math.floor(c/1e3/60/60%24),x=Math.floor(c/1e3/60/60/24),l=[];return x>0&&l.push(`${x} day${x!==1?"s":""}`),w>0&&l.push(`${w} hour${w!==1?"s":""}`),k>0&&l.push(`${k} minute${k!==1?"s":""}`),(T>0||l.length===0)&&l.push(`${T} second${T!==1?"s":""}`),l.join(", ")}const B=e=>{var h,y;const o=JSON.parse(e.content||"{}"),f=JSON.parse(o.assignmentMetaInfo||"{}"),g=U(f.assignmentDeadline);return{...f,assignmentAnswersKey:JSON.parse(o.assignmentAnswersKey||"[]"),assignmentTaskSet:JSON.parse(o.assignmentTaskSet||"[]"),id:e.id,remainingTimeNew:g,contentType:e.contentType,title:e.title,description:e.description,createdBy:{id:e.createdBy.id,username:((y=(h=e.createdBy)==null?void 0:h.personalInfo)==null?void 0:y.username)||"Unknown",role:e.createdBy.role},createdAt:new Date(Number(e.createdAt)).toISOString()}};Z(async()=>{await O();const e=setInterval(()=>{v.resources.length>=1&&(m.value=v.resources.map(o=>B(o)))},1e3);q(()=>{clearInterval(e)})});async function j(e){const o=e.id;await v.fetchResource(o),N.push("task")}return(e,o)=>{const f=s("v-progress-linear"),g=s("v-alert"),h=s("v-card-title"),y=s("v-card-subtitle"),c=s("v-divider"),T=s("v-card-text"),k=s("v-col"),w=s("v-row"),x=s("v-spacer"),l=s("v-btn"),F=s("v-tooltip"),J=s("v-card-actions"),K=s("v-card"),E=s("v-container");return a(),I(E,null,{default:t(()=>[d.value?(a(),D("div",te,[n(f,{color:"teal",indeterminate:""})])):S("",!0),d.value?S("",!0):(a(),D("div",ne,[M.value?(a(),I(g,{key:0,border:"top",type:"warning",variant:"outlined",prominent:"",class:"ml-38 mt-4",width:"72%"},{default:t(()=>[_(p(M.value),1)]),_:1})):S("",!0),!d.value&&m.value[0].id.length===0?(a(),I(g,{key:1,border:"top",type:"info",class:"ml-38 mt-4",width:"72%",variant:"outlined",prominent:""},{default:t(()=>[se,oe]),_:1})):S("",!0),!d.value&&m.value[0].id.length>5?(a(),I(w,{key:2,class:"overflow-y-auto mt-1",style:{height:"400px","max-height":"400px","overflow-y":"auto"}},{default:t(()=>[(a(!0),D(H,null,Q(m.value,(u,G)=>(a(),I(k,{key:G,cols:"12",sm:"12",md:"6",lg:"6"},{default:t(()=>[n(K,{class:"mx-auto my-2",style:{"background-image":'url("https://slidechef.net/wp-content/uploads/2023/10/Math-Background.jpg")',"background-size":"cover","background-position":"center"}},{default:t(()=>[n(w,null,{default:t(()=>[n(k,{cols:"12"},{default:t(()=>[n(h,{class:"headline text-h4 text-black"},{default:t(()=>[_(p(u.title),1)]),_:2},1024),n(y,{class:"text-overline text-black"},{default:t(()=>[_("ASSIGNMENT "+p(u.contentType),1)]),_:2},1024),n(c),n(y,{class:"text-black"},{default:t(()=>[ae,_(" "+p(u.assignmentDuration),1),re,ce,_(" "+p(u.assignmentDeadline)+" ",1),le,r("strong",null,"Due in: "+p(u.remainingTimeNew),1),ie]),_:2},1024),n(T,{class:"bg-surface-light pt-4"},{default:t(()=>[_(p(u.description||"None"),1)]),_:2},1024),n(c)]),_:2},1024)]),_:2},1024),n(J,null,{default:t(()=>[n(x),n(F,{location:"top"},{activator:t(({props:R})=>[n(l,W({ref_for:!0},R,{color:"#212121","prepend-icon":"mdi-file-edit-outline",size:"large",block:"",rounded:"x-small",variant:"outlined",onClick:pe=>j(u)}),{default:t(()=>[_("View Assignment Task ")]),_:2},1040,["onClick"])]),default:t(()=>[de]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):S("",!0)]))]),_:1})}}});const _e=L(ue,[["__scopeId","data-v-88da50a9"]]);const V={__name:"index",setup(b){return(N,m)=>(a(),D("div",null,[n(_e)]))}};typeof C=="function"&&C(V);const ke=L(V,[["__scopeId","data-v-8b843a48"]]);export{ke as default};
